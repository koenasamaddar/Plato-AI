<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platelet Detection System Using Images</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fas fa-microscope"></i> PDS</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#detection">Detection</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#how-it-works">How It Works</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="hero-overlay">
            <div class="container">
                <div class="hero-content text-center">
                    <h1>Platelet Detection System Using Images</h1>
                    <p class="lead">"Enhancing Medical Diagnostics with Precise and Automated Platelet Detection Using Deep Learning."</p>
                    <a href="#detection" class="btn btn-primary btn-lg">Explore Detection</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Highlights Section -->
    <section class="highlights py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-robot fa-3x mb-3"></i>
                            <h3>Deep Learning-Based Analysis</h3>
                            <p>Utilizing advanced image processing and YOLOv8 models to identify and count platelets with precision, improving efficiency in medical diagnostics.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-chart-line fa-3x mb-3"></i>
                            <h3>High Accuracy</h3>
                            <p>Our system ensures precise platelet counting with a minimal margin of error, leveraging advanced deep learning algorithms to enhance diagnostic reliability.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-bolt fa-3x mb-3"></i>
                            <h3>Fast & Efficient Processing</h3>
                            <p> Utilizing optimized image processing techniques, our system delivers rapid analysis and immediate result generation, significantly reducing turnaround time in medical diagnostics.<p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Detection Section -->
    <section id="detection" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">Detection Process</h2>
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h3>Upload Image</h3>
                            <div class="upload-area">
                                <input type="file" id="imageUpload" class="form-control mb-3" accept="image/*">
                                <button class="btn btn-primary" id="processImage">Process Image</button>
                                <div id="loadingSpinner" class="spinner-border text-primary" role="status" style="display: none;">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h3>Results Preview</h3>
                            <div id="resultPreview" class="text-center">
                                <p>Upload an image to see the detection results</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section id="how-it-works" class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">How It Works</h2>
            <div class="timeline">
                <div class="row">
                    <div class="col-md-3 text-center mb-4">
                        <div class="timeline-step">
                            <i class="fas fa-image fa-3x mb-3"></i>
                            <h4>Upload Image</h4>
                            <p> Users upload high-resolution blood smear images captured under a microscope. The system accepts various image formats and ensures compatibility for processing.</p>
                        </div>
                    </div>
                    <div class="col-md-3 text-center mb-4">
                        <div class="timeline-step">
                            <i class="fas fa-crop-alt fa-3x mb-3"></i>
                            <h4>Processing</h4>
                            <p> The uploaded image undergoes preprocessing, including contrast enhancement, noise reduction, and normalization, ensuring optimal conditions for accurate platelet detection.</p>
                        </div>
                    </div>
                    <div class="col-md-3 text-center mb-4">
                        <div class="timeline-step">
                            <i class="fas fa-brain fa-3x mb-3"></i>
                            <h4>Platelet Detection and Counting </h4>
                            <p>A deep learning model YOLOv8 analyzes the processed image, identifying and segmenting platelets. The system then counts the detected platelets, ensuring precision and reliability.</p>
                        </div>
                    </div>
                    <div class="col-md-3 text-center mb-4">
                        <div class="timeline-step">
                            <i class="fas fa-check-circle fa-3x mb-3"></i>
                            <h4>Results</h4>
                            <p> The final result provides an accurate platelet count along with a detailed report. Users can view, download, or share the results for further medical analysis or consultation.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">About The Project</h2>
            <div class="row">
                <div class="col-md-8 mx-auto text-center">
                    <p class="lead mb-4">
                        Our Platelet Detection System Using Images utilizes an advanced Deep Learning model to accurately detect and count Platelets(PLT), Red Blood Cells (RBCs), and White Blood Cells (WBCs) from Blood smear images. By automating the analysis process, the system minimizes human error, enhances diagnostic precision, and improves efficiency in healthcare settings, aiding in faster and more reliable blood cell assessments.    
                    </p>
                    <div class="benefits mt-5">
                        <h3 class="mb-4">Key Benefits</h3>
                        <div class="row">
                            <div class="col-md-4">
                                <i class="fas fa-clock fa-2x mb-3"></i>
                                <h4>Time-Efficient</h4>
                                <p> Our system processes blood smear images within seconds, delivering rapid analysis and results. By reducing manual effort, it accelerates diagnosis and enhances workflow efficiency in medical labs.</p>
                            </div>
                            <div class="col-md-4">
                                <i class="fas fa-user-shield fa-2x mb-3"></i>
                                <h4>Reliable</h4>
                                <p>Powered by advanced deep learning algorithms, the system ensures high accuracy in detecting and counting platelets, red blood cells (RBCs), and white blood cells (WBCs), minimizing errors in medical analysis.</p>
                            </div>
                            <div class="col-md-4">
                                <i class="fas fa-expand-arrows-alt fa-2x mb-3"></i>
                                <h4>Scalable</h4>
                                <p> Designed to handle multiple blood sample analyses efficiently, our system can be seamlessly integrated into hospital and laboratory workflows, supporting high-volume processing with ease.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">Contact Us</h2>
            <div class="row">
                <div class="col-md-6 mb-4">
                    <form id="contactForm">
                        <div class="mb-3">
                            <input type="text" class="form-control" placeholder="Your Name" required>
                        </div>
                        <div class="mb-3">
                            <input type="email" class="form-control" placeholder="Your Email" required>
                        </div>
                        <div class="mb-3">
                            <textarea class="form-control" rows="5" placeholder="Your Message" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Send Message</button>
                    </form>
                </div>

                <div class="col-md-6 mb-4">
                    <div class="contact-info">
                        <h3>Get in Touch</h3>
                        <p><i class="fas fa-envelope"></i> Email: </p>
                        <p>nikitazambare2003@gmail.com</p>
                        <p>nirbhaymohite18@gmail.com</p>
                        <p>koenasamaddar23@gmail.com</p>
                        <p><i class="fas fa-phone"></i> Phone: +91 9867740243 </p>
                        <p><i class="fas fa-map-marker-alt"></i> Location: Navi Mumbai, India</p>
                        <div class="social-links mt-4">
                            <a href="https://www.linkedin.com/in/nikita-zambare-a2582527b" class="me-3"><i class="fab fa-linkedin fa-2x"></i></a>
                            <a href="#" class="me-3"><i class="fab fa-twitter fa-2x"></i></a>
                            <a href="https://github.com/Nikitazambare" class="me-3"><i class="fab fa-github fa-2x"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-light py-4">
        <div class="container text-center">
            <p>&copy; 2025 Platelet Detection System. All rights reserved.</p>
        </div>
    </footer>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script>
    document.getElementById("processImage").addEventListener("click", async function(event) {
    event.preventDefault();

    let fileInput = document.getElementById("imageUpload");
    let file = fileInput.files[0];

    if (!file) {
        alert("‚ö†Ô∏è Please select an image.");
        return;
    }

    // Validate file type
    const allowedTypes = ["image/png", "image/jpeg", "image/jpg"];
    if (!allowedTypes.includes(file.type)) {
        alert("‚ö†Ô∏è Only JPG, JPEG, and PNG images are allowed.");
        return;
    }

    // Validate file size (max 5MB)
    if (file.size > 5 * 1024 * 1024) { 
        alert("‚ö†Ô∏è File size must be less than 5MB.");
        return;
    }

    let formData = new FormData();
    formData.append("file", file);

    // Show loading spinner
    document.getElementById("loadingSpinner").style.display = 'inline-block';

    try {
        const response = await fetch("/upload", { method: "POST", body: formData });
        const result = await response.json();

        if (response.ok) {
            const resultPreview = document.getElementById("resultPreview");

            // Extract raw counts
            const rawCounts = result.raw_counts;

            // Generate Medical Report Format
            let medicalReport = `
                <h3 class="mt-3 text-center">ü©∫ Blood Cell Analysis Report</h3>
                <p class="text-center">Generated by Platelet Detection System</p>

                <!-- Raw Counts Section -->
                <div class="text-center">
                    <h5>üìù Raw Detection Counts</h5>
                    <p><strong>Platelets:</strong> ${rawCounts.Platelets}</p>
                    <p><strong>RBCs:</strong> ${rawCounts.RBCs}</p>
                    <p><strong>WBCs:</strong> ${rawCounts.WBCs}</p>
                </div>

                <!-- Medical Report Table -->
                <table class="table table-bordered mt-3">
                    <thead class="table-dark">
                        <tr>
                            <th>Test</th>
                            <th>Result</th>
                            <th>Reference Range</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            // Loop through report data
            result.report.forEach(test => {
                let statusColor = test.status === "Low" ? "text-danger" :
                                  test.status === "High" ? "text-warning" :
                                  "text-success";

                medicalReport += `
                    <tr>
                        <td>${test.test}</td>
                        <td>${test.result}</td>
                        <td>${test.reference_range}</td>
                        <td class="${statusColor}">${test.status}</td>
                    </tr>
                `;
            });

            medicalReport += `</tbody></table>`;

            // Display the report along with the processed image
            resultPreview.innerHTML = `
                <img src="${result.image_url}" class="img-fluid rounded shadow mb-3" alt="Processed Image">
                ${medicalReport}
            `;
        } else {
            throw new Error(result.error || "Failed to process image.");
        }
    } catch (error) {
        alert("‚ùå Error: " + error.message);
    }

    // Hide loading spinner
    document.getElementById("loadingSpinner").style.display = 'none';
});

    </script>    
</body>
</html>
